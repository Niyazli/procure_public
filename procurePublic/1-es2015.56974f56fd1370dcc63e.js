(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/u4/":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("z6cu"),s=i("o1XJ"),r=i("RqW0"),c=i("fXoL"),o=i("ki9d"),a=i("tk/3"),l=i("2Vo4"),g=i("qD5x");let u=(()=>{class e{constructor(e){this.validationError=new l.a(null),this.clearError=new l.a(null),this.className=e?e.className:"error-hint",this.hintClassName=e?e.hintClassName:"error-hint--label"}}return e.\u0275fac=function(t){return new(t||e)(c.Yb(g.a,8))},e.\u0275prov=c.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=i("KWQi");let h=(()=>{class e{constructor(e,t,i,s){this.http=t,this.errorHintService=i,this.notificationService=s,this.handleError=e=>{const{errors:t}=e.error;if(t){this.errorHintService.clearError.next(null),this.notificationService.triggerVisibility.next({state:t.every(e=>e.errorType===r.a.Validation)?"hidden":"visible",errors:t.filter(e=>e.errorType!==r.a.Validation).map(e=>Object.assign(Object.assign({},e),{errorCode:e.value?e.value:e.errorCode}))});const e=[r.a.Error,r.a.Validation];t.filter(t=>e.includes(t.errorType)).forEach(e=>this.errorHintService.validationError.next({control:e.param,error:e.value?e.value:e.errorCode}))}return Object(n.a)(e)},this.apiUrl=e?e.apiUrl:null}proceedFullRequest(e,t){return e}getSuccessMessage(e){return{successMessage:e.successMessage}}getFullUrl(e){return this.apiUrl+"/"+e}get(e){return this.proceedFullRequest(this.http.get(this.getFullUrl(e.url),e.options),this.getSuccessMessage(e))}post(e){return this.proceedFullRequest(this.http.post(this.getFullUrl(e.url),e.requestBody,e.options),this.getSuccessMessage(e))}put(e){return this.proceedFullRequest(this.http.put(this.getFullUrl(e.url),e.requestBody,e.options),this.getSuccessMessage(e))}patch(e){return this.proceedFullRequest(this.http.patch(this.getFullUrl(e.url),e.requestBody,e.options),this.getSuccessMessage(e))}delete(e){return this.proceedFullRequest(this.http.delete(this.getFullUrl(e.url),e.options),this.getSuccessMessage(e))}send(e){switch(console.log(e),e.request=this.setHeaders(e.request),e.requestType){case s.a.GET:return this.get(e.request);case s.a.POST:return this.post(e.request);case s.a.PATCH:return this.patch(e.request);case s.a.PUT:return this.put(e.request);case s.a.DELETE:return this.delete(e.request)}}setHeaders(e){return e}setApiUrl(e){this.apiUrl=e}buildQueryParams(e){let t="?";return Object.keys(e).map((i,n)=>{const s=e[i];0!==n&&s&&(t+="&"),s&&(t+=`${i}=${s}`)}),t}}return e.\u0275fac=function(t){return new(t||e)(c.Yb(o.a,8),c.Yb(a.a),c.Yb(u),c.Yb(d.a))},e.\u0275prov=c.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},MqEU:function(e,t,i){"use strict";i.d(t,"a",(function(){return F}));var n=i("fXoL");class s{constructor({url:e,requestBody:t,options:i,successMessage:n}){this.url=e,this.requestBody=t,this.options=i,this.successMessage=n}buildUrlWithID(e){this.url+=`/${e}`}}class r{constructor({requestType:e,request:t}){this.requestType=e,this.request=t}}var c=i("o1XJ"),o=i("/u4/");let a=(()=>{class e{constructor(e){this.backendService=e}getParent(){const e=new r({requestType:c.a.GET,request:new s({url:"category/getParentCategories",successMessage:"Valid"})});return this.backendService.send(e)}getChild(e){const t=new r({requestType:c.a.GET,request:new s({url:`category/getSubCategories/${e}`})});return this.backendService.send(t)}getInternalCategories(){const e=new r({requestType:c.a.GET,request:new s({url:"internalCategory/GetCategories"})});return this.backendService.send(e)}filterCategories(e,t){const i=this.backendService.buildQueryParams(t),n=new r({requestType:c.a.GET,request:new s({url:e+i})});return this.backendService.send(n)}}return e.\u0275fac=function(t){return new(t||e)(n.Yb(o.a))},e.\u0275prov=n.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=i("ofXK"),g=i("7EHt"),u=i("kmnG"),d=i("qFsG"),h=i("3Pt+"),p=i("NFeN"),b=i("bTqV"),C=i("QibW"),m=i("bSwM");function f(e,t){if(1&e&&(n.Ub(0,"b"),n.Dc(1),n.Tb()),2&e){const e=n.gc(2).$implicit;n.Cb(1),n.Fc("(",e.organizationsCount," suppliers)")}}function y(e,t){if(1&e){const e=n.Vb();n.Ub(0,"mat-radio-button",7),n.cc("click",(function(){n.vc(e);const t=n.gc().$implicit;return n.gc().selectCategory(t)})),n.Ub(1,"h4",8),n.Dc(2),n.Bc(3,f,2,1,"b",6),n.Tb(),n.Tb()}if(2&e){const e=n.gc().$implicit;n.mc("checked",e.checked),n.Cb(2),n.Fc(" ",e.name," "),n.Cb(1),n.mc("ngIf",e.organizationsCount)}}function v(e,t){if(1&e&&(n.Ub(0,"b"),n.Dc(1),n.Tb()),2&e){const e=n.gc(2).$implicit;n.Cb(1),n.Fc("(",e.organizationsCount," suppliers)")}}function T(e,t){if(1&e){const e=n.Vb();n.Ub(0,"mat-checkbox",9),n.cc("ngModelChange",(function(t){return n.vc(e),n.gc().$implicit.checked=t}))("ngModelChange",(function(){n.vc(e);const t=n.gc().$implicit;return n.gc().selectCategory(t)})),n.Ub(1,"h4",8),n.Dc(2),n.Bc(3,v,2,1,"b",6),n.Tb(),n.Tb()}if(2&e){const e=n.gc().$implicit;n.mc("ngModel",e.checked)("checked",e.checked),n.Cb(2),n.Fc(" ",e.name," "),n.Cb(1),n.mc("ngIf",e.organizationsCount)}}function w(e,t){if(1&e){const e=n.Vb();n.Ub(0,"span"),n.Ub(1,"app-cpv-recursion-model",10),n.cc("$getChild",(function(t){return n.vc(e),n.gc(2).getChild(t)}))("selectedCategory",(function(t){return n.vc(e),n.gc(2).selectedCategory.emit(t)})),n.Tb(),n.Tb()}if(2&e){const e=n.gc().$implicit,t=n.gc();n.Cb(1),n.mc("multiSelected",t.multiSelected)("multiple",t.multiple)("categories",e.subCategories)}}function M(e,t){if(1&e&&(n.Ub(0,"p",12),n.Dc(1),n.Tb()),2&e){const e=t.$implicit;n.Cb(1),n.Ec(e.name)}}function k(e,t){if(1&e&&(n.Ub(0,"span"),n.Bc(1,M,2,1,"p",11),n.Tb()),2&e){const e=n.gc().$implicit;n.Cb(1),n.mc("ngForOf",e.cpvCodes)}}function O(e,t){if(1&e){const e=n.Vb();n.Ub(0,"li"),n.Ub(1,"div",1),n.Ub(2,"div",2),n.Ub(3,"button",3),n.cc("click",(function(){n.vc(e);const i=t.$implicit;return n.gc().getChild(i)})),n.Ub(4,"mat-icon"),n.Dc(5),n.Tb(),n.Tb(),n.Bc(6,y,4,3,"mat-radio-button",4),n.Bc(7,T,4,4,"mat-checkbox",5),n.Tb(),n.Bc(8,w,2,3,"span",6),n.Bc(9,k,2,1,"span",6),n.Tb(),n.Tb()}if(2&e){const e=t.$implicit,i=n.gc();n.Cb(3),n.mc("disabled",!e.hasChild),n.Cb(2),n.Ec(e.subCategories&&(null==e.subCategories?null:e.subCategories.length)>0?"keyboard_arrow_down":"keyboard_arrow_right"),n.Cb(1),n.mc("ngIf",!i.multiple),n.Cb(1),n.mc("ngIf",i.multiple),n.Cb(1),n.mc("ngIf",e.subCategories),n.Cb(1),n.mc("ngIf",e.cpvCodes)}}let P=(()=>{class e{constructor(){this.$getChild=new n.o,this.selectedCategory=new n.o}log(){console.log(this.xz)}ngOnInit(){this.multiSelected||(this.multiSelected=[])}getChild(e){this.$getChild.emit(e)}selectCategory(e){this.selectedCategory.emit(this.multiple?this.categories.filter(e=>e.checked):[e])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Ib({type:e,selectors:[["app-cpv-recursion-model"]],inputs:{categories:"categories",multiple:"multiple",multiSelected:"multiSelected"},outputs:{$getChild:"$getChild",selectedCategory:"selectedCategory"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"d-flex","align-items-start","flex-column"],[1,"list-item"],["type","button","mat-icon-button","",3,"disabled","click"],["color","primary",3,"checked","click",4,"ngIf"],["color","primary",3,"ngModel","checked","ngModelChange",4,"ngIf"],[4,"ngIf"],["color","primary",3,"checked","click"],[1,"text-normal"],["color","primary",3,"ngModel","checked","ngModelChange"],[3,"multiSelected","multiple","categories","$getChild","selectedCategory"],["class","ml-5",4,"ngFor","ngForOf"],[1,"ml-5"]],template:function(e,t){1&e&&(n.Ub(0,"ul"),n.Bc(1,O,10,6,"li",0),n.Tb()),2&e&&(n.Cb(1),n.mc("ngForOf",t.categories))},directives:[l.k,b.b,p.a,l.l,C.a,m.a,h.h,h.j,e],styles:["ul[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;align-items:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{padding-top:9px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 5px}"]}),e})();var S=i("bv9b");const U=function(e){return{"h-100":e}};function q(e,t){if(1&e){const e=n.Vb();n.Ub(0,"div",7),n.Ub(1,"mat-form-field",8),n.Ub(2,"mat-label"),n.Dc(3,"Keyword"),n.Tb(),n.Ub(4,"input",9),n.cc("ngModelChange",(function(t){return n.vc(e),n.gc().keyword=t}))("change",(function(){return n.vc(e),n.gc().filterCategories()})),n.Tb(),n.Ub(5,"mat-icon",10),n.Dc(6,"search"),n.Tb(),n.Tb(),n.Ub(7,"app-cpv-recursion-model",11),n.cc("selectedCategory",(function(t){return n.vc(e),n.gc().selectedCategory.emit(t)}))("$getChild",(function(t){return n.vc(e),n.gc().getChild(t)})),n.Tb(),n.Tb()}if(2&e){const e=n.gc();n.Ac("height",e.listHeight,"px"),n.mc("ngClass",n.pc(6,U,e.fullHeight)),n.Cb(4),n.mc("ngModel",e.keyword),n.Cb(3),n.mc("multiple",e.multiple)("categories",e.categories)}}function x(e,t){1&e&&n.Pb(0,"mat-progress-bar",12)}const _=function(e){return{static:e}},E=function(e){return{"d-none":e}};let F=(()=>{class e{constructor(e){this.categoryService=e,this.selectedCategories=[],this.selectedCategory=new n.o}ngOnChanges(e){this.title||(this.title="CPV tree list"),this.getData()}ngOnInit(){this.getData()}getData(){this.loadingState=!0,this.newCategory?this.categoryService.getInternalCategories().subscribe(e=>{this.loadingState=!1,this.categories=e.map(e=>(e.subCategories=e.subCategories.map(e=>Object.assign(Object.assign({},e),{checked:this.selectedCategories.includes(e.id),collapsed:!1})),Object.assign(Object.assign({},e),{hasChild:e.subCategories.length>0,checked:this.selectedCategories.includes(e.id),collapsed:!1})))},e=>this.loadingState=!1):this.categoryService.getParent().subscribe(e=>{console.log(e),this.loadingState=!1,e.forEach(e=>e.hasChild=!0),this.categories=this.selectedCategories&&this.selectedCategories.length>0?e.map(e=>Object.assign(Object.assign({},e),{checked:this.selectedCategories.includes(e.id)})):e},e=>this.loadingState=!1)}getChild(e){this.newCategory||(this.loadingState=!0,null===e.subCategories||0===e.subCategories.length?this.categoryService.getChild(e.id).subscribe(t=>{this.loadingState=!1,[...e.subCategories]=this.selectedCategories&&this.selectedCategories.length>0?t.map(e=>Object.assign(Object.assign({},e),{checked:this.selectedCategories.includes(e.id)})):t},e=>this.loadingState=!1):(this.loadingState=!1,[...e.subCategories]=[]))}filterCategories(){""!==this.keyword?this.categoryService.filterCategories(this.newCategory?"internalCategory/SearchInternalCategories":"category/SearchInCategories",{keyword:this.keyword,pageNumber:1,pageSize:100,active:!1}).subscribe(e=>{console.log(e),this.categories=this.newCategory?e.internalCategories:e.cpvCodes}):this.getData()}}return e.\u0275fac=function(t){return new(t||e)(n.Ob(a))},e.\u0275cmp=n.Ib({type:e,selectors:[["app-expansion-cpv-tree"]],inputs:{multiple:"multiple",hideHeader:"hideHeader",staticWidth:"staticWidth",expanded:"expanded",fullHeight:"fullHeight",newCategory:"newCategory",selectedCategories:"selectedCategories",title:"title",listHeight:"listHeight"},outputs:{selectedCategory:"selectedCategory"},features:[n.Ab],decls:8,vars:9,consts:[[1,"wrapper",3,"ngClass"],[1,"isPrimary","treeList"],[3,"expanded"],[3,"ngClass"],[1,"text-white"],["matExpansionPanelContent",""],["mode","indeterminate","color","primary",4,"ngIf"],[1,"category",3,"ngClass"],[1,"px-5","mt-3","w-100"],["autocomplete","off","matInput","","placeholder","enter a keyword","name","keyword",3,"ngModel","ngModelChange","change"],["matSuffix",""],[3,"multiple","categories","selectedCategory","$getChild"],["mode","indeterminate","color","primary"]],template:function(e,t){1&e&&(n.Ub(0,"div",0),n.Ub(1,"mat-accordion",1),n.Ub(2,"mat-expansion-panel",2),n.Ub(3,"mat-expansion-panel-header",3),n.Ub(4,"mat-panel-title",4),n.Dc(5),n.Tb(),n.Tb(),n.Bc(6,q,8,8,"ng-template",5),n.Bc(7,x,1,0,"mat-progress-bar",6),n.Tb(),n.Tb(),n.Tb()),2&e&&(n.mc("ngClass",n.pc(5,_,t.staticWidth)),n.Cb(2),n.mc("expanded",t.expanded),n.Cb(1),n.mc("ngClass",n.pc(7,E,t.hideHeader)),n.Cb(2),n.Ec(t.title),n.Cb(2),n.mc("ngIf",t.loadingState))},directives:[l.j,g.a,g.c,g.f,g.g,g.d,l.l,u.b,u.e,d.a,h.b,h.h,h.j,p.a,u.f,P,S.a],styles:[".wrapper.static[_ngcontent-%COMP%]{width:800px}@media screen and (max-width:768px){.wrapper.static[_ngcontent-%COMP%]{width:250px}}.wrapper[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{height:500px;overflow-y:auto}.wrapper[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;background-color:#fff;z-index:9}"]}),e})()},o1XJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.GET="GET",e.POST="POST",e.PATCH="PATCH",e.PUT="PUT",e.DELETE="DELETE",e}({})}}]);