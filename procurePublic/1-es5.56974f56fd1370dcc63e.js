function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/u4/":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,i,c=n("z6cu"),a=n("o1XJ"),o=n("RqW0"),s=n("fXoL"),l=n("ki9d"),u=n("tk/3"),g=n("2Vo4"),d=n("qD5x"),h=((r=function e(t){_classCallCheck(this,e),this.validationError=new g.a(null),this.clearError=new g.a(null),this.className=t?t.className:"error-hint",this.hintClassName=t?t.hintClassName:"error-hint--label"}).\u0275fac=function(e){return new(e||r)(s.Yb(d.a,8))},r.\u0275prov=s.Kb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),f=n("KWQi"),p=((i=function(){function e(t,n,r,i){var a=this;_classCallCheck(this,e),this.http=n,this.errorHintService=r,this.notificationService=i,this.handleError=function(e){var t=e.error.errors;if(t){a.errorHintService.clearError.next(null),a.notificationService.triggerVisibility.next({state:t.every((function(e){return e.errorType===o.a.Validation}))?"hidden":"visible",errors:t.filter((function(e){return e.errorType!==o.a.Validation})).map((function(e){return Object.assign(Object.assign({},e),{errorCode:e.value?e.value:e.errorCode})}))});var n=[o.a.Error,o.a.Validation];t.filter((function(e){return n.includes(e.errorType)})).forEach((function(e){return a.errorHintService.validationError.next({control:e.param,error:e.value?e.value:e.errorCode})}))}return Object(c.a)(e)},this.apiUrl=t?t.apiUrl:null}return _createClass(e,[{key:"proceedFullRequest",value:function(e,t){return e}},{key:"getSuccessMessage",value:function(e){return{successMessage:e.successMessage}}},{key:"getFullUrl",value:function(e){return this.apiUrl+"/"+e}},{key:"get",value:function(e){return this.proceedFullRequest(this.http.get(this.getFullUrl(e.url),e.options),this.getSuccessMessage(e))}},{key:"post",value:function(e){return this.proceedFullRequest(this.http.post(this.getFullUrl(e.url),e.requestBody,e.options),this.getSuccessMessage(e))}},{key:"put",value:function(e){return this.proceedFullRequest(this.http.put(this.getFullUrl(e.url),e.requestBody,e.options),this.getSuccessMessage(e))}},{key:"patch",value:function(e){return this.proceedFullRequest(this.http.patch(this.getFullUrl(e.url),e.requestBody,e.options),this.getSuccessMessage(e))}},{key:"delete",value:function(e){return this.proceedFullRequest(this.http.delete(this.getFullUrl(e.url),e.options),this.getSuccessMessage(e))}},{key:"send",value:function(e){switch(console.log(e),e.request=this.setHeaders(e.request),e.requestType){case a.a.GET:return this.get(e.request);case a.a.POST:return this.post(e.request);case a.a.PATCH:return this.patch(e.request);case a.a.PUT:return this.put(e.request);case a.a.DELETE:return this.delete(e.request)}}},{key:"setHeaders",value:function(e){return e}},{key:"setApiUrl",value:function(e){this.apiUrl=e}},{key:"buildQueryParams",value:function(e){var t="?";return Object.keys(e).map((function(n,r){var i=e[n];0!==r&&i&&(t+="&"),i&&(t+="".concat(n,"=").concat(i))})),t}}]),e}()).\u0275fac=function(e){return new(e||i)(s.Yb(l.a,8),s.Yb(u.a),s.Yb(h),s.Yb(f.a))},i.\u0275prov=s.Kb({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},MqEU:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var r,i=n("fXoL"),c=function(){function e(t){var n=t.url,r=t.requestBody,i=t.options,c=t.successMessage;_classCallCheck(this,e),this.url=n,this.requestBody=r,this.options=i,this.successMessage=c}return _createClass(e,[{key:"buildUrlWithID",value:function(e){this.url+="/".concat(e)}}]),e}(),a=function e(t){var n=t.requestType,r=t.request;_classCallCheck(this,e),this.requestType=n,this.request=r},o=n("o1XJ"),s=n("/u4/"),l=((r=function(){function e(t){_classCallCheck(this,e),this.backendService=t}return _createClass(e,[{key:"getParent",value:function(){var e=new a({requestType:o.a.GET,request:new c({url:"category/getParentCategories",successMessage:"Valid"})});return this.backendService.send(e)}},{key:"getChild",value:function(e){var t=new a({requestType:o.a.GET,request:new c({url:"category/getSubCategories/".concat(e)})});return this.backendService.send(t)}},{key:"getInternalCategories",value:function(){var e=new a({requestType:o.a.GET,request:new c({url:"internalCategory/GetCategories"})});return this.backendService.send(e)}},{key:"filterCategories",value:function(e,t){var n=this.backendService.buildQueryParams(t),r=new a({requestType:o.a.GET,request:new c({url:e+n})});return this.backendService.send(r)}}]),e}()).\u0275fac=function(e){return new(e||r)(i.Yb(s.a))},r.\u0275prov=i.Kb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),u=n("ofXK"),g=n("7EHt"),d=n("kmnG"),h=n("qFsG"),f=n("3Pt+"),p=n("NFeN"),b=n("bTqV"),C=n("QibW"),m=n("bSwM");function y(e,t){if(1&e&&(i.Ub(0,"b"),i.Dc(1),i.Tb()),2&e){var n=i.gc(2).$implicit;i.Cb(1),i.Fc("(",n.organizationsCount," suppliers)")}}function v(e,t){if(1&e){var n=i.Vb();i.Ub(0,"mat-radio-button",7),i.cc("click",(function(){i.vc(n);var e=i.gc().$implicit;return i.gc().selectCategory(e)})),i.Ub(1,"h4",8),i.Dc(2),i.Bc(3,y,2,1,"b",6),i.Tb(),i.Tb()}if(2&e){var r=i.gc().$implicit;i.mc("checked",r.checked),i.Cb(2),i.Fc(" ",r.name," "),i.Cb(1),i.mc("ngIf",r.organizationsCount)}}function k(e,t){if(1&e&&(i.Ub(0,"b"),i.Dc(1),i.Tb()),2&e){var n=i.gc(2).$implicit;i.Cb(1),i.Fc("(",n.organizationsCount," suppliers)")}}function T(e,t){if(1&e){var n=i.Vb();i.Ub(0,"mat-checkbox",9),i.cc("ngModelChange",(function(e){return i.vc(n),i.gc().$implicit.checked=e}))("ngModelChange",(function(){i.vc(n);var e=i.gc().$implicit;return i.gc().selectCategory(e)})),i.Ub(1,"h4",8),i.Dc(2),i.Bc(3,k,2,1,"b",6),i.Tb(),i.Tb()}if(2&e){var r=i.gc().$implicit;i.mc("ngModel",r.checked)("checked",r.checked),i.Cb(2),i.Fc(" ",r.name," "),i.Cb(1),i.mc("ngIf",r.organizationsCount)}}function _(e,t){if(1&e){var n=i.Vb();i.Ub(0,"span"),i.Ub(1,"app-cpv-recursion-model",10),i.cc("$getChild",(function(e){return i.vc(n),i.gc(2).getChild(e)}))("selectedCategory",(function(e){return i.vc(n),i.gc(2).selectedCategory.emit(e)})),i.Tb(),i.Tb()}if(2&e){var r=i.gc().$implicit,c=i.gc();i.Cb(1),i.mc("multiSelected",c.multiSelected)("multiple",c.multiple)("categories",r.subCategories)}}function w(e,t){if(1&e&&(i.Ub(0,"p",12),i.Dc(1),i.Tb()),2&e){var n=t.$implicit;i.Cb(1),i.Ec(n.name)}}function O(e,t){if(1&e&&(i.Ub(0,"span"),i.Bc(1,w,2,1,"p",11),i.Tb()),2&e){var n=i.gc().$implicit;i.Cb(1),i.mc("ngForOf",n.cpvCodes)}}function M(e,t){if(1&e){var n=i.Vb();i.Ub(0,"li"),i.Ub(1,"div",1),i.Ub(2,"div",2),i.Ub(3,"button",3),i.cc("click",(function(){i.vc(n);var e=t.$implicit;return i.gc().getChild(e)})),i.Ub(4,"mat-icon"),i.Dc(5),i.Tb(),i.Tb(),i.Bc(6,v,4,3,"mat-radio-button",4),i.Bc(7,T,4,4,"mat-checkbox",5),i.Tb(),i.Bc(8,_,2,3,"span",6),i.Bc(9,O,2,1,"span",6),i.Tb(),i.Tb()}if(2&e){var r=t.$implicit,c=i.gc();i.Cb(3),i.mc("disabled",!r.hasChild),i.Cb(2),i.Ec(r.subCategories&&(null==r.subCategories?null:r.subCategories.length)>0?"keyboard_arrow_down":"keyboard_arrow_right"),i.Cb(1),i.mc("ngIf",!c.multiple),i.Cb(1),i.mc("ngIf",c.multiple),i.Cb(1),i.mc("ngIf",r.subCategories),i.Cb(1),i.mc("ngIf",r.cpvCodes)}}var S,P=((S=function(){function e(){_classCallCheck(this,e),this.$getChild=new i.o,this.selectedCategory=new i.o}return _createClass(e,[{key:"log",value:function(){console.log(this.xz)}},{key:"ngOnInit",value:function(){this.multiSelected||(this.multiSelected=[])}},{key:"getChild",value:function(e){this.$getChild.emit(e)}},{key:"selectCategory",value:function(e){this.selectedCategory.emit(this.multiple?this.categories.filter((function(e){return e.checked})):[e])}}]),e}()).\u0275fac=function(e){return new(e||S)},S.\u0275cmp=i.Ib({type:S,selectors:[["app-cpv-recursion-model"]],inputs:{categories:"categories",multiple:"multiple",multiSelected:"multiSelected"},outputs:{$getChild:"$getChild",selectedCategory:"selectedCategory"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"d-flex","align-items-start","flex-column"],[1,"list-item"],["type","button","mat-icon-button","",3,"disabled","click"],["color","primary",3,"checked","click",4,"ngIf"],["color","primary",3,"ngModel","checked","ngModelChange",4,"ngIf"],[4,"ngIf"],["color","primary",3,"checked","click"],[1,"text-normal"],["color","primary",3,"ngModel","checked","ngModelChange"],[3,"multiSelected","multiple","categories","$getChild","selectedCategory"],["class","ml-5",4,"ngFor","ngForOf"],[1,"ml-5"]],template:function(e,t){1&e&&(i.Ub(0,"ul"),i.Bc(1,M,10,6,"li",0),i.Tb()),2&e&&(i.Cb(1),i.mc("ngForOf",t.categories))},directives:[u.k,b.b,p.a,u.l,C.a,m.a,f.h,f.j,S],styles:["ul[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;align-items:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{padding-top:9px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 5px}"]}),S),U=n("bv9b"),q=function(e){return{"h-100":e}};function x(e,t){if(1&e){var n=i.Vb();i.Ub(0,"div",7),i.Ub(1,"mat-form-field",8),i.Ub(2,"mat-label"),i.Dc(3,"Keyword"),i.Tb(),i.Ub(4,"input",9),i.cc("ngModelChange",(function(e){return i.vc(n),i.gc().keyword=e}))("change",(function(){return i.vc(n),i.gc().filterCategories()})),i.Tb(),i.Ub(5,"mat-icon",10),i.Dc(6,"search"),i.Tb(),i.Tb(),i.Ub(7,"app-cpv-recursion-model",11),i.cc("selectedCategory",(function(e){return i.vc(n),i.gc().selectedCategory.emit(e)}))("$getChild",(function(e){return i.vc(n),i.gc().getChild(e)})),i.Tb(),i.Tb()}if(2&e){var r=i.gc();i.Ac("height",r.listHeight,"px"),i.mc("ngClass",i.pc(6,q,r.fullHeight)),i.Cb(4),i.mc("ngModel",r.keyword),i.Cb(3),i.mc("multiple",r.multiple)("categories",r.categories)}}function E(e,t){1&e&&i.Pb(0,"mat-progress-bar",12)}var I,F=function(e){return{static:e}},A=function(e){return{"d-none":e}},$=((I=function(){function e(t){_classCallCheck(this,e),this.categoryService=t,this.selectedCategories=[],this.selectedCategory=new i.o}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.title||(this.title="CPV tree list"),this.getData()}},{key:"ngOnInit",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;this.loadingState=!0,this.newCategory?this.categoryService.getInternalCategories().subscribe((function(t){e.loadingState=!1,e.categories=t.map((function(t){return t.subCategories=t.subCategories.map((function(t){return Object.assign(Object.assign({},t),{checked:e.selectedCategories.includes(t.id),collapsed:!1})})),Object.assign(Object.assign({},t),{hasChild:t.subCategories.length>0,checked:e.selectedCategories.includes(t.id),collapsed:!1})}))}),(function(t){return e.loadingState=!1})):this.categoryService.getParent().subscribe((function(t){console.log(t),e.loadingState=!1,t.forEach((function(e){return e.hasChild=!0})),e.categories=e.selectedCategories&&e.selectedCategories.length>0?t.map((function(t){return Object.assign(Object.assign({},t),{checked:e.selectedCategories.includes(t.id)})})):t}),(function(t){return e.loadingState=!1}))}},{key:"getChild",value:function(e){var t,n=this;this.newCategory||(this.loadingState=!0,null===e.subCategories||0===e.subCategories.length?this.categoryService.getChild(e.id).subscribe((function(t){var r;n.loadingState=!1,r=_toArray(n.selectedCategories&&n.selectedCategories.length>0?t.map((function(e){return Object.assign(Object.assign({},e),{checked:n.selectedCategories.includes(e.id)})})):t),e.subCategories=r.slice(0)}),(function(e){return n.loadingState=!1})):(this.loadingState=!1,t=[],e.subCategories=t.slice(0)))}},{key:"filterCategories",value:function(){var e=this;""!==this.keyword?this.categoryService.filterCategories(this.newCategory?"internalCategory/SearchInternalCategories":"category/SearchInCategories",{keyword:this.keyword,pageNumber:1,pageSize:100,active:!1}).subscribe((function(t){console.log(t),e.categories=e.newCategory?t.internalCategories:t.cpvCodes})):this.getData()}}]),e}()).\u0275fac=function(e){return new(e||I)(i.Ob(l))},I.\u0275cmp=i.Ib({type:I,selectors:[["app-expansion-cpv-tree"]],inputs:{multiple:"multiple",hideHeader:"hideHeader",staticWidth:"staticWidth",expanded:"expanded",fullHeight:"fullHeight",newCategory:"newCategory",selectedCategories:"selectedCategories",title:"title",listHeight:"listHeight"},outputs:{selectedCategory:"selectedCategory"},features:[i.Ab],decls:8,vars:9,consts:[[1,"wrapper",3,"ngClass"],[1,"isPrimary","treeList"],[3,"expanded"],[3,"ngClass"],[1,"text-white"],["matExpansionPanelContent",""],["mode","indeterminate","color","primary",4,"ngIf"],[1,"category",3,"ngClass"],[1,"px-5","mt-3","w-100"],["autocomplete","off","matInput","","placeholder","enter a keyword","name","keyword",3,"ngModel","ngModelChange","change"],["matSuffix",""],[3,"multiple","categories","selectedCategory","$getChild"],["mode","indeterminate","color","primary"]],template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ub(1,"mat-accordion",1),i.Ub(2,"mat-expansion-panel",2),i.Ub(3,"mat-expansion-panel-header",3),i.Ub(4,"mat-panel-title",4),i.Dc(5),i.Tb(),i.Tb(),i.Bc(6,x,8,8,"ng-template",5),i.Bc(7,E,1,0,"mat-progress-bar",6),i.Tb(),i.Tb(),i.Tb()),2&e&&(i.mc("ngClass",i.pc(5,F,t.staticWidth)),i.Cb(2),i.mc("expanded",t.expanded),i.Cb(1),i.mc("ngClass",i.pc(7,A,t.hideHeader)),i.Cb(2),i.Ec(t.title),i.Cb(2),i.mc("ngIf",t.loadingState))},directives:[u.j,g.a,g.c,g.f,g.g,g.d,u.l,d.b,d.e,h.a,f.b,f.h,f.j,p.a,d.f,P,U.a],styles:[".wrapper.static[_ngcontent-%COMP%]{width:800px}@media screen and (max-width:768px){.wrapper.static[_ngcontent-%COMP%]{width:250px}}.wrapper[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{height:500px;overflow-y:auto}.wrapper[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;background-color:#fff;z-index:9}"]}),I)},o1XJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e.GET="GET",e.POST="POST",e.PATCH="PATCH",e.PUT="PUT",e.DELETE="DELETE",e}({})}}]);